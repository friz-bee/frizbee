generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["postgresqlExtensions"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Admin {
  id       Int    @id @default(autoincrement())
  email    String @unique
  password String
  username String @unique
  role     String @default("admin")
}

model Language {
  id        Int                  @id @default(autoincrement())
  code      String               @unique
  name      String
  isDefault Boolean              @default(false)
  projects  ProjectTranslation[]
  createdAt DateTime             @default(now())
  updatedAt DateTime             @updatedAt
}

model Project {
  id           Int                  @id @default(autoincrement())
  slug         String               @unique
  imageUrl     String
  techStack    String[]
  projectUrl   String?
  translations ProjectTranslation[]
  createdAt    DateTime             @default(now())
  updatedAt    DateTime             @updatedAt
}

model ProjectTranslation {
  id          Int      @id @default(autoincrement())
  projectId   Int
  languageId  Int
  title       String
  description String
  project     Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
  language    Language @relation(fields: [languageId], references: [id], onDelete: Cascade)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@unique([projectId, languageId])
}
